;-------------------------------------------------
;共通部分
;-------------------------------------------------
;
;追記関数
;仮にTSした場合等に、文中の男性・女性を以下で定義してれば変換します
;-------------------------------------------------
;ARG:0番のキャラの性別を返す関数
;-------------------------------------------------
;本体統合の折削除
;
;=================================================
;●口上の存在判定
;=================================================
@KOJO_EXIST_K77

;=================================================
;●開始時
;※状況にかかわらず常に実行される。取り扱い注意※
;=================================================
@KOJO_TRAIN_START_K77

;=================================================
;●終了時
;※状況にかかわらず常に実行される。取り扱い注意※
;=================================================
@KOJO_TRAIN_END_K77

;=================================================
;●コマンド実行時(このキャラがプレイヤー側のとき)
;※状況にかかわらず常に実行される。取り扱い注意※
;=================================================
@KOJO_COM_TARGET_K77

;=================================================
;●コマンド実行時(このキャラがプレイヤー側のとき)
;※状況にかかわらず常に実行される。取り扱い注意※
;=================================================
@KOJO_COM_PLAYER_K77

;=================================================
;●コマンド実行前(ターゲット・プレイヤー問わず)
;※地の文が表示される前に実行される。戻り値に1を設定する(RETURN 1)と地の文がカットされる
;  必要に応じてKOJO_COM_TARGETの代わりに使う
;※状況にかかわらず常に実行される。取り扱い注意※
;=================================================
@KOJO_COM_BEFORE_K77
RETURN 0

;=================================================
;●コマンド実行後(パラメータの変動処理が終わってから呼び出される)
;※状況にかかわらず常に実行される。取り扱い注意※
;=================================================
@KOJO_COM_AFTER_K77
#DIM Ｃカウンタ
#DIM Ｖカウンタ
#DIM Ａカウンタ
#DIM Ｂカウンタ
#DIM Ｍカウンタ

;KOJO_AFTERが呼び出されるたびに初期化
Ｃカウンタ = 0
Ｖカウンタ = 0
Ａカウンタ = 0
Ｂカウンタ = 0
Ｍカウンタ = 0

;[虚ろ]状態の場合、口が塞がっている場合は口上を表示しない
IF TALENT:虚ろ || IS_EQUIP_CONTINUE(TARGET, "口装着")
	RETURN 0
ENDIF

;-------------------------------------------------
;初めてＣ絶頂
;-------------------------------------------------
IF NOWEX:Ｃ絶頂 > 0
	Ｃカウンタ ++
	SIF CFLAG:220 == 0
		CFLAG:220 = 1
ENDIF

;-------------------------------------------------
;初めてＶ絶頂
;-------------------------------------------------
IF NOWEX:Ｖ絶頂 > 0
	Ｖカウンタ ++
	SIF CFLAG:221 == 0
		CFLAG:221 = 1
ENDIF

;-------------------------------------------------
;初めてＡ絶頂
;-------------------------------------------------
IF NOWEX:Ａ絶頂 > 0
	Ａカウンタ ++
	SIF CFLAG:222 == 0
		CFLAG:222 = 1
ENDIF

;-------------------------------------------------
;初めてＢ絶頂
;-------------------------------------------------
IF NOWEX:Ｂ絶頂 > 0
	Ｂカウンタ ++
	SIF CFLAG:223 == 0
		CFLAG:223 = 1
ENDIF

;-------------------------------------------------
;初めてＭ絶頂
;-------------------------------------------------
IF NOWEX:Ｍ絶頂 > 0
	Ｍカウンタ ++
	SIF CFLAG:224 == 0
		CFLAG:224 = 1
ENDIF

;-------------------------------------------------
;多重絶頂(服従系統は現在除外)
;-------------------------------------------------
IF !TALENT:服従 && (Ｃカウンタ + Ｖカウンタ + Ａカウンタ + Ｂカウンタ + Ｍカウンタ) > 0
	PRINTFORML 
	SETCOLOR 0xDA81F5
	SELECTCASE (Ｃカウンタ + Ｖカウンタ + Ａカウンタ + Ｂカウンタ + Ｍカウンタ)
	;単体絶頂・二重絶頂兼用
		CASE 1, 2
			FONTSTYLE 1
			SELECTCASE RAND:4
				CASE 0
					PRINTFORML 「っ……、きもち……よかっ、たです……あっ、はあ……っ」
				CASE 1
					PRINTFORML 「い、ちゃ……い……ました……、んぅ、はあ……っ、びくびく、しちゃう……」
				CASE 2
					PRINTFORML 「はあ……ああ、んや、あっ……はあ、ぁっ、んっ……はあ……っ」
				CASEELSE
					PRINTFORML 「あ……ああっ、ふふっ……んっ……よかった、はあっ、はあ……」
			ENDSELECT
			FONTSTYLE 0
			SELECTCASE RAND:3
				CASE 0
					PRINTFORMW  快楽に身を震わせた%ANAME(TARGET)%は、蕩けた視線を%ANAME(MASTER)%に向けている...
				CASE 1
					PRINTFORMW  滴り落ちる汗を拭う事すら忘れ、%ANAME(TARGET)%は恍惚としている...
				CASEELSE
					PRINTFORMW  絶頂の波に甘い吐息を吐き出しながら、ぴくぴく身体を震わせている...
			ENDSELECT

	;三重絶頂
		CASE 3
			FONTSTYLE 1
			SELECTCASE RAND:4
				CASE 0
					PRINTFORML 「は、あ……っ、あ……んんっ、ぅ……はあっ、はあ、はああぁ……っ」
				CASE 1
					PRINTFORML 「い、ちゃ……う……、ぅ、んぅっ、はあっ、ああ……っ」
				CASE 2
					PRINTFORML 「はあ……ああ、や、あっ……んあ、ぁっ、んっ……！　い、くぅ……！」
				CASEELSE
					PRINTFORML 「あ……ああっ、ふ、ぅっ……んくぅっ……、はあっ、はあっ、あ、ああ……」
			ENDSELECT
			FONTSTYLE 0
			SELECTCASE RAND:3
				CASE 0
					PRINTFORMW  快楽に身を震わせた%ANAME(TARGET)%は、蕩けた視線を%ANAME(MASTER)%に向けている...
				CASE 1
					PRINTFORMW  滴り落ちる汗を拭う事すら忘れ、%ANAME(TARGET)%は恍惚としている...
				CASEELSE
					PRINTFORMW  押し寄せる絶頂の波に甘い吐息を吐き出しながら、ぴくぴく身体を震わせている...
			ENDSELECT

	;四重絶頂
		CASE 4
			FONTSTYLE 1
			SELECTCASE RAND:4
				CASE 0
					PRINTFORML 「はああっっ、あ、んんっ、ぅぅ、あはあっ、あはあ、はああぁ……っ！」
				CASE 1
					PRINTFORML 「い、ちゃっっあぁ！　んぅっ、あはあっ、ああっっっい、きゅ、ううぅぅっ！」
				CASE 2
					PRINTFORML 「は、あっ、ああっ、や、らあっっ！　んはあ、ぁっ、んぅっ……！　い、くぅ……！」
				CASEELSE
					PRINTFORML 「あっっああっ！　ふあぅっっ、いってぅうっ、はあっ、はあっ、あ、ああ……」
			ENDSELECT
			FONTSTYLE 0
			SELECTCASE RAND:3
				CASE 0
					PRINTFORMW  激しい快楽に身を震わせた%ANAME(TARGET)%は、蕩けた視線でみつめている...
				CASE 1
					PRINTFORMW  滴り落ちる愛液を振り撒きながら、%ANAME(TARGET)%は快楽に惚けている...
				CASEELSE
					PRINTFORMW  押し寄せる絶頂の波に甘い吐息を吐き出しながら、ぴくぴく身体を震わせている...
			ENDSELECT

	;五重絶頂
		CASE 5
			FONTSTYLE 1
			SELECTCASE RAND:4
				CASE 0
					PRINTFORML 「はッ、ッッ、ああッッ！　ッ、っ！　うっ、ぁ゛！　はあ゛っ、あ゛ああ……っ！！」
				CASE 1
					PRINTFORML 「ア゛ア゛ァッッッッイ、くぅッッ、んくぅッッ！　はあ゛ッ、ア゛ああ……っ！！」
				CASE 2
					PRINTFORML 「はあ゛あ゛ッッあ゛、やっ、ら゛あッッッあ、ぁ゛っ、あ！　イ、くぅぅぅうう！」
				CASEELSE
					PRINTFORML 「あッッ！　ッ、ああっ、ふ、ぅっ……んあぁ゛っ、はあ゛ッ、あ゛、あ、ああっ……！！」
			ENDSELECT
			FONTSTYLE 0
			SELECTCASE RAND:3
				CASE 0
					PRINTFORMW  強烈な快楽に身を震わせた%ANAME(TARGET)%は、焦点の定まらない視線を虚空に預けたまま惚けている...
				CASE 1
					PRINTFORMW  滴り落ちる唾液すら気にもせず、%ANAME(TARGET)%は零れる嗚咽と身震いに恍惚としている...
				CASEELSE
					PRINTFORMW  押し寄せる絶頂の波に口をぱくぱくさせながら、震える身体を抑えきれずにいる...
			ENDSELECT
	ENDSELECT
	FONTSTYLE 1
	IF NOWEX:MASTER:射精 > 0
		SELECTCASE GET_STACK_SPERM_TO(TARGET, MASTER)
			CASE 1
				CALL MULTIPLE_SPERM_VOICE
			CASE 2
				CALL MULTIPLE_SPERM_VOICE
		ENDSELECT
	ENDIF
	FONTSTYLE 0
	RESETCOLOR
ENDIF

;-------------------------------------------------
;射精　;仮実装・上記呼び出し含め未統一
;-------------------------------------------------
@MULTIPLE_SPERM_VOICE
PRINTFORML 
IF NOWEX:MASTER:射精 > 0
	;MASTER射精
	SELECTCASE GET_STACK_SPERM_TO(TARGET, MASTER)
		;膣に射精・アナル
		CASE 1, 2
			;[射精量]
			SELECTCASE NOWEX:MASTER:射精
			;普通の量
				CASE 1 TO 3
					SELECTCASE RAND:3
						CASE 0
							PRINTFORML 「は、あ……っ、んんぅ……あつ、い……はあっ、はあ、はああぁ……っ」
						CASE 1
							PRINTFORML 「はあ……っ、あうっ……だされちゃった……はああ……ああぁっ……」
						CASE 2
							PRINTFORML 「……は……あ……気持ち……よかったですか……？　はあ……っ、ああ、ん……っ」
					ENDSELECT
			;大量
				CASE 4 TO 7
					SELECTCASE RAND:3
						CASE 0
							PRINTFORML 「あっ、ん、んぅぅう……あ、つ……は、ああっ、おなか……はあ、はああぁ……っ」
						CASE 1
							PRINTFORML 「はあ……っ、あっ……ああ……いっぱい、だされちゃったあ……はああ……ああぁっ……」
						CASE 2
							PRINTFORML 「は……あ……はあ……、射精しすぎ……です……ああ……っ、はああ……」
					ENDSELECT
			;超大量・超々大量
				CASEELSE
			;CASE 8 TO 11
					SELECTCASE RAND:3
						CASE 0
							PRINTFORML 「あッ、ああっ！　だ、めえっ……！　あ、ああっ、おなか……あっ、ああっ！！」
						CASE 1
							PRINTFORML 「んあっ、あ……、押、し付……け、ちゃ……！　だしちゃっっ、ああ……んああぁっ……！！」
						CASE 2
							PRINTFORML 「ああ……はいら……ああっ……！　も、お……はいら、ないっ、からあ……こわれちゃあ……！」
					ENDSELECT
			ENDSELECT

		;手
		CASE 3

		;口
		CASE 4

		;胸
		CASE 5

		;足
		CASE 6

		;尻尾
		CASE 7

		;顔
		CASE 8

		;髪
		CASE 9

		;腋
		CASE 10

		;その他
		CASEELSE

	ENDSELECT
ENDIF

IF NOWEX:TARGET:射精 > 0
	SELECTCASE TCVAR:TARGET:420
		CASE 0
		CASE 1
		CASE 2
	ENDSELECT
ENDIF
PRINTFORMW 
;=================================================
;●単体エンディング関係
;=================================================
;
;
;
;
;
;
;
;
;
;
;★ここから先にはエンディングが記述されています★
;ネタバレを避けたい方は閲覧しないようにご注意下さい。
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
@KOJO_SINGLE_ENDING_K77
;単体エンディング
;全都市を統一したとき、好感度5000以上かつ全キャラ中最も好感度が高いと表示される
;PRINTFORMW 

;RETURNの値を0→1に変えると、デフォルトの単体エンディングメッセージがスキップされる
RETURN 0

@KOJO_DEAD_ENDING_K77
;斬首エンディング
;自勢力が滅亡したときの選択肢で「……斬れ」を選択して主人公が死亡した場合に、好感度5000以上かつ全キャラ中最も好感度が高いと表示される
;PRINTFORMW 

;RETURNの値を0→1に変えると、デフォルトの単体エンディングメッセージがスキップされる
RETURN 0
